<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
	<title>Без имени</title>
	<meta http-equiv="content-type" content="text/html;charset=utf-8" />
	<meta name="generator" content="Geany 0.18" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript">
        function on_translation_submit(id) {
            jQuery.ajax({
                url: "/add_translation/",
                type: "post",
                data: $('#form'+id).serialize(),
                success: function(){
                    $('#translation'+id).append($('#form'+id+' textarea').val());
                }
            });
        };
    </script>
</head>

<body>
    {% load comments %}
    <table>
	{% for dataset in data %}
        <tr>
        <td width=30%>{{ dataset.english_text }}</td>
        <td width=30%><span id="translation{{ dataset.id }}">{{ dataset.current_translation }}</span></td>
        <td>
            <form action="/add_translation/" method="post" id="form{{ dataset.id }}">
                {% csrf_token %}
                {{ dataset.new_translation_form.as_p }}
                <button type="button" onclick="on_translation_submit({{ dataset.id }})">Сохранить</button>
                <input type="submit" value="Submit" />
            </form>
        </td>
        <td>
            {% render_comment_list for dataset.ep %}
            {% render_comment_form for dataset.ep %}
        </td>
        </tr>
    {% endfor %}
    </table>
</body>
</html>
